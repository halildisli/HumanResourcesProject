@using HumanResourcesProject.Domain.Enums;
@model Permission
@{
    ViewData["Title"] = "DetailOfPermission";
    Layout = "_Layout";
}

<div class="col-lg-10">
    <div class="card">
        <div class="card-header">
            <strong>Detail Of Advance</strong>
            <small>  Information</small>
        </div>
        <div class="card-body card-block">

            <div class="row">
                <div class="col-12 col-sm-auto">
                    <div class="mx-auto" style="width: 140px;">
                        <div>
                            <img class="d-flex justify-content-center align-items-center rounded " src="~/images/employeeimages/@Model.Employee.ImagePath" style="height: 140px; width: 140px;" />
                        </div>
                    </div>
                </div>
                <div class="col d-flex flex-column flex-sm-row justify-content-between">
                    <div class="text-center text-sm-left mb-2 mb-sm-0">
                        <h4 class="pt-sm-2 pb-1 mb-0 text-nowrap">@Model.Employee.FirstName @Model.Employee.SecondName @Model.Employee.Surname @Model.Employee.SecondSurname</h4>

                        <div class="mt-2">
                            <button class="btn btn-primary" type="button">
                                <span>
                                    @{
                                        if (Model.ApprovalState == PermissionStatus.Pending)
                                        {
                                            <text> Pending </text>
                                        }
                                        else if (Model.ApprovalState == PermissionStatus.Approved)
                                        {
                                            <text> Approved </text>
                                        }
                                        else
                                        {
                                            <text> Denied </text>
                                        }
                                    }
                                </span>
                            </button>
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-md-12">

                <address class="mt-3">
                    <div class="col">
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label><strong>Employee Name : </strong> </label>

                                    <label value=""> @Model.Employee.FirstName @Model.Employee.SecondName @Model.Employee.Surname @Model.Employee.SecondSurname</label>
                                </div>
                            </div>                        
                        </div>

                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label><strong>Permission Type : </strong></label>

                                    <label value="PermissionType">@Enum.GetName(Model.PermissionType)</label>
                                </div>
                            </div>
                            <br>
                            <br>
                            <div class="col">
                                <div class="form-group">
                                    <label><strong>Permission Status : </strong></label>

                                    <label value="ApprovalState">@Model.ApprovalState</label>
                                </div>
                            </div>
                            <br>
                            <br>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label><strong>Date of Request : </strong></label>

                                    <label value="RequestDate">@Model.RequestDate</label>

                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <label><strong>Date of Response : </strong></label>
                                    @{
                                        if (Model.ReplyDate != null)
                                        {
                                            DateTime date = (DateTime)Model.ReplyDate;
                                            <label value="ReplyDate">@date.ToString("dd/MM/yyyy")</label>
                                        }
                                        else
                                        {
                                            <label value="ReplyDate">There is no response.</label>
                                        }
                                    }
                                </div>
                            </div>

                        </div>                     
                    </div>
                </address>

            </div>
        </div>
        <div class="d-flex flex-row justify-content-start mb-2 ml-4">
            <div class="col-md-4">
                <a asp-action="ApprovePermission" asp-controller="Employee" class="btn btn-success rounded" asp-route-id="@Model.Id">Approve Permission</a>
            </div>
            <div class="col-md-4">
                <a asp-action="DenyPermission" asp-controller="Employee" class="btn btn-danger rounded" asp-route-id="@Model.Id">Deny Permission</a>
            </div>
        </div>
    </div>
    <div class="d-flex flex-row justify-content-center">
        <div class="col-md-4">
            <a asp-action="ListOfPermission" asp-controller="Employee" class="btn btn-primary">Back To List of Permission</a>
        </div>
    </div>
</div>
